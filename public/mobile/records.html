<div ui-content-for="title">
    <span>{{ tempTable.name }}
        <small>({{ tempRecords.count }})</small>
    </span>
</div>

<div ui-content-for="navbarLeft">
    <a class='btn' ng-click="" ng-show="tempRecords && !tempEdit">
        <i class="fa fa-chevron-left"></i>
    </a>
</div>

<div ui-content-for="navbarAction">
    <a class='btn' ng-click="tempEdit=true" ng-show="tempRecords && !tempEdit">
        <i class="fa fa-pencil"></i>
    </a>
    <a class='btn' ng-click="tempEdit=false" ng-show="tempRecords && tempEdit">
        <i class="fa fa-close"></i>
    </a>
</div>

<div class="panel-group" ui-state='myAccordion' ng-show="!tempEdit">

    <div class="panel panel-default" ng-repeat="record in tempRecords.records">
        <div class="panel-heading" ui-set="{'myAccordion': $index}">
            <h4 class="panel-title" ng-click="getRecordByTemp(record, tempRecords, true)">
                            {{ record['self'] }}
                        </h4>
        </div>
        <div ui-if="myAccordion == {{$index}}">
            <div class="panel-body">
                <small class="pull-right">
                                {{ tempRecord.timeEnd - tempRecord.timeStart }}ms
                            </small>
                <div ng-show="tempRecord" ng-include="'amTempRecord'"></div>
            </div>
        </div>
    </div>
</div>

<div ng-include="(tempEdit)?'/mobile/template.html':''"></div>

<script type="text/ng-template" id="amTempRecord">

    <span style="display: none">{{table = (isStructure) ? l.table: (t)?t:tempRecord }}</span>

    <h5>
        <small>
            <span class="fa fa-eye-slash" ng-click="table.showSelf=!table.showSelf" ng-show="!table.showSelf"></span>
            <span class="fa fa-eye" ng-click="table.showSelf=!table.showSelf" ng-show="table.showSelf"></span>
        </small>
        {{ (l['$']['sqlname']) ? l['$']['sqlname'] : table['$']['sqlname'] }}
        <small>({{ table['ID'] }})</small>
    </h5>

    <ul ng-show="!table.showSelf">
        <li ng-repeat="f in table.field"><strong>{{(f.aliasName)?f.aliasName:(tempTable.showLabel)?f['$']['label']:f['$']['sqlname']}}:</strong> {{ formatValue(f['$']['sqlname'],
            f.data) }}
        </li>
    </ul>

    <span ng-show="!table.showSelf" ng-repeat="l in table.link">
        <div ng-show="l.table && l['$']['card11']=='yes'" ng-include="'amTempRecord'" style="padding-left: 20px" ng-init="isStructure=true"></div>
        <div ng-show="l.tables && !l['$']['card11']" style="padding-left: 20px">
            <a ng-click="l.showChild=!l.showChild" ng-show="!l.showChild"><span class="fa fa-plus"></span>
                {{l['$']['sqlname']}} ({{l.tables.length}})
            </a>
            <a ng-click="l.showChild=!l.showChild" ng-show="l.showChild"><span class="fa fa-minus"></span>
                {{l['$']['sqlname']}} ({{l.tables.length}})
            </a> 
            
    <div ng-show="l.showChild" ng-repeat="t in l.tables" ng-include="'amTempRecord'" style="padding-left: 18px" ng-init="isStructure=false"></div>
    </div>
    </span>

</script>
